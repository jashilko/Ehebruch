@model Ehebruch.Models.Account.UserProfile
 
@{
    Layout = "~/Views/Shared/_LayoutBoot3.cshtml";
}

<div class="row">
    <div class="col-md-6 col-md-offset-3">
        @using (Html.BeginForm("Create", "Profile", FormMethod.Post, new { @class = "form-horizontal", role = "form", enctype="multipart/form-data"}))
        {
            <h4>Заполните свой профиль</h4>
            <hr />
            @Html.ValidationSummary()
            <div class="form-group">
                @Html.LabelFor(m => m.CountryId, new { @class = "col-md-2 control-label" })
                <div class="col-md-7">
                    @Html.DropDownList("Country", ViewBag.Country as SelectList, new {id="country", @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.RegionId, new { @class = "col-md-2 control-label" })
                <div class="col-md-7">
                    @Html.DropDownList("Region", ViewBag.Region as SelectList, new { id = "region" , @class = "form-control"})
                </div>
            </div>       
            <div class="form-group">
                @Html.LabelFor(m => m.CityId, new { @class = "col-md-2 control-label" })
                <div class="col-md-7">
                    @Html.DropDownList("Sity", ViewBag.City as SelectList, new { id = "sity" , @class = "form-control"})
                </div>
            </div>       
   
            <div class="form-group">
                @Html.LabelFor(m => m.dateOfBirthday, new { @class = "col-md-3 control-label" })
                <div class="col-md-6">
                    @Html.TextBoxFor(m => m.dateOfBirthday, new { @class = "form-control" })
                </div>
            </div>       
            <div class="form-group">
                @Html.LabelFor(m => m.sex, new { @class = "col-md-2 control-label" })
                <div class="col-md-7">
                    <div class="controls">
                    @Html.DropDownListFor(model => model.sex, new[]   { new SelectListItem() { Text = "Мужской", Value = "true" }, 
                    new SelectListItem() { Text = "Женский", Value = "false" }}, new { @class= "form-control"})  
                    </div>                   
                </div>
            </div>  

            <div class="form-group">
                @Html.LabelFor(m => m.height, new { @class = "col-md-2 control-label" })
                <div class="col-md-3">
                    <div class="controls">
                    @Html.DropDownListFor(model => model.height, 
                    new SelectList(
                        Enumerable.Range(150, 250).Select(x => new { Value = x, Text = x }), 
                        "Value", 
                        "Text"), 
                    new { @class= "form-control"})  
                    </div>                          
                </div>
                @Html.LabelFor(m => m.weight, new { @class = "col-md-1 control-label" })
                <div class="col-md-3">
                    <div class="controls">
                    @Html.DropDownListFor(model => model.weight, 
                    new SelectList(
                        Enumerable.Range(50, 150).Select(x => new { Value = x, Text = x }), 
                        "Value", 
                        "Text"), 
                    new { @class= "form-control"})  
                    </div>                          
                                          
                </div>
            </div>       
          
            <div class="form-group">
                @Html.LabelFor(m => m.wish, new { @class = "col-md-2 control-label" })
                <div class="col-md-6">
                    <div class="checkbox">
                         @foreach (KeyValuePair<string, int> c in ViewBag.wishe)
                                {
                                    <input type="checkbox" name="selectedwishes" value="@c.Value"/>@c.Key <br />
                                }                    
                    </div>
                </div>
            </div>  
            
            
            <div class="form-group">
                @Html.LabelFor(model => model.AvatarPath, new { @class = "col-md-2 control-label" })
                <div class="col-md-6">
                    <input type="file" id="error" name="error"  />
                </div>
            </div>
            
                             
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" class="btn btn-default" value="Создать профиль" />
                </div>
            </div>               
        }


    </div>
</div>

@section Scripts{
<script type="text/javascript">
    $(function () {

        $('#country').change(function ()
        {
            // получаем выбранный id
            var id = $(this).val();
            $.ajax({
                type: 'GET',
                url: '@Url.Action("GetRegion")/' + id,
                success: function (data) {
                     
                    // заменяем содержимое присланным частичным представлением
                    $('#region').replaceWith(data);
                }
            });
        });

        
    })
</script>
}





